(()=>{"use strict";var e={499:()=>{},626:(e,t,r)=>{r.d(t,{i:()=>u});var n=r(575),a=r(468),i=r(263),o=r(143),l=r(619),s=r(723),p=r(496);r(518);let __=s.__,c="isInsertingPagePattern",d="automattic/full-site-editing/inserting-pattern";function u(e){let{setOpenState:t}=(0,o.useDispatch)(p.L),{setUsedPageOrPatternsModal:r}=(0,o.useDispatch)("automattic/wpcom-welcome-guide"),{replaceInnerBlocks:s}=(0,o.useDispatch)("core/block-editor"),{editPost:u}=(0,o.useDispatch)("core/editor"),{toggleFeature:g}=(0,o.useDispatch)("core/edit-post"),{disableTips:m}=(0,o.useDispatch)("core/nux"),h=(0,o.useSelect)(e=>{let{isOpen:t,isPatternPicker:r}=e(p.L);return{isOpen:t(),isWelcomeGuideActive:e("core/edit-post").isFeatureActive("welcomeGuide"),areTipsEnabled:!!e("core/nux")&&e("core/nux").areTipsEnabled(),...r()&&{title:__("Choose a Pattern","full-site-editing"),description:__("Pick a pre-defined layout or continue with a blank page","full-site-editing")}}},[]),{getMeta:_,postContentBlock:f}=(0,o.useSelect)(e=>{let t=e("core/editor").getBlocks();return{getMeta:()=>e("core/editor").getEditedPostAttribute("meta"),postContentBlock:t.find(e=>"a8c/post-content"===e.name)}},[]),b=(0,a.useCallback)((e,t)=>{let r=_(),n=Array.isArray(r._wpcom_template_layout_category)&&r._wpcom_template_layout_category||[];u({meta:{...r,_starter_page_template:e,_wpcom_template_layout_category:[...n,t]}})},[u,_]),y=(0,a.useCallback)((e,t)=>{(0,l.addFilter)(c,d,()=>!0),e&&u({title:e}),s(f?f.clientId:"",t,!1),(0,l.removeFilter)(c,d)},[u,f,s]),{isWelcomeGuideActive:w,areTipsEnabled:v}=h,P=(0,a.useCallback)(()=>{w?g("welcomeGuide"):v&&m()},[v,m,w,g]),k=(0,a.useCallback)(()=>{t("CLOSED"),r?.()},[t,r]);return(0,a.createElement)(i.A,(0,n.A)({},h,{onClose:k,savePatternChoice:b,insertPattern:y,hideWelcomeGuide:P},e))}},496:(e,t,r)=>{r.d(t,{L:()=>a});var n=r(143);let a=(0,n.createReduxStore)("automattic/starter-page-layouts",{reducer:(e="CLOSED",{type:t,...r})=>"SET_IS_OPEN"===t?r.openState:e,actions:{setOpenState:e=>({type:"SET_IS_OPEN",openState:e||"CLOSED"})},selectors:{isOpen:e=>"CLOSED"!==e,isPatternPicker:e=>"OPEN_FOR_BLANK_CANVAS"===e}});(0,n.register)(a)},263:(e,t,r)=>{r.d(t,{A:()=>y});var n=r(586),a=r(468),i=r(997),o=r(427),l=r(491),s=r(723),p=r(357),c=r(325),d=r(64),u=r(861),g=r(809),m=r(341),h=r(213),_=r(611);let __=s.__,f=o.MenuItem;class b extends a.Component{constructor(e){super(e),(0,n.A)(this,"getFormattedPatternsByPatternSlugs",(0,c.memoize)(e=>{let t=e.reduce((e,{name:t,title:r="",description:n="",html:a,pattern_meta:o})=>{let l=o?.viewport_width?Number(o.viewport_width):1280;return e[t]={name:t,title:n||r,blocks:a?(0,i.parse)((0,m.A)(a,this.props.siteInformation)):[],viewportWidth:Math.max(l,320)},e},{});return this.filterPatternsWithMissingBlocks(t)})),(0,n.A)(this,"getBlocksForSelection",e=>{let t=this.getBlocksByPatternSlug(e);return(0,g.A)(t,function(e){return"core/button"===e.name&&void 0!==e.attributes.url&&(e.attributes.url="#"),e})}),(0,n.A)(this,"setPattern",e=>{(0,h.m3)(e);let{selectedCategory:t}=this.state;if(this.props.savePatternChoice(e,t),"blank"===e){this.props.insertPattern("",[]),this.props.onClose();return}let r=this.props.patterns.find(t=>t.name===e),n=(r?.categories||{}).hasOwnProperty("home"),a=this.getBlocksForSelection(e),i=n?null:r?.title||"";if(!a||!a.length){this.props.onClose();return}this.props.insertPattern(i,a),this.props.onClose()}),(0,n.A)(this,"handleCategorySelection",e=>{this.setState({selectedCategory:e})}),(0,n.A)(this,"closeModal",e=>{if(e?.type==="blur"){e.stopPropagation();return}(0,h.mk)(),this.props.onClose()}),(0,n.A)(this,"getPatternGroups",()=>{if(!this.props.patterns.length)return null;let e={};for(let t of this.props.patterns)for(let r in t.categories)r in e||(e[r]=t.categories[r]);return(0,u.W)(["featured","about","blog","home","gallery","services","contact"],e)}),(0,n.A)(this,"getPatternsForGroup",e=>{if(!this.props.patterns.length)return null;if("blank"===e)return[{name:"blank",title:"Blank",html:"",ID:null}];let t=[];for(let r of this.props.patterns)for(let n in r.categories)n===e&&t.push(r);return t}),(0,n.A)(this,"getPatternCategories",()=>{let e=this.getPatternGroups();if(!e)return null;let t=[];for(let r in e)t.push({slug:r,name:e[r].title});return t}),(0,n.A)(this,"renderPatternGroup",()=>{let{selectedCategory:e}=this.state;if(!e)return null;let t=this.getPatternsForGroup(e);return t?.length?this.renderPatternsList(t):null}),(0,n.A)(this,"renderPatternsList",e=>{if(!e.length)return null;let t=this.getFormattedPatternsByPatternSlugs(this.props.patterns),r=Object.keys(t),n=e.filter(e=>r.includes(e.name));return n.length?(0,a.createElement)(_.A,{label:__("Layout","full-site-editing"),patterns:n.map(e=>t[e.name]),onPatternSelect:this.setPattern}):null}),this.state={selectedCategory:this.getDefaultSelectedCategory()}}filterPatternsWithMissingBlocks(e){return Object.entries(e).reduce((e,[t,r])=>{let n=(0,d.A)(r.blocks);return n&&r.blocks.length||(e[t]=r),e},{})}componentDidMount(){this.props.isOpen&&this.trackCurrentView()}componentDidUpdate(e){!e.isOpen&&this.props.isOpen&&this.trackCurrentView(),(this.props.isWelcomeGuideActive||this.props.areTipsEnabled)&&this.props.hideWelcomeGuide()}trackCurrentView(){(0,h.$3)("add-page")}getDefaultSelectedCategory(){let e=this.getPatternCategories();return e?.length?e[0].slug:null}getBlocksByPatternSlug(e){return this.getFormattedPatternsByPatternSlugs(this.props.patterns)?.[e]?.blocks??[]}render(){let{selectedCategory:e}=this.state,{isOpen:t,instanceId:r}=this.props;return t?(0,a.createElement)(o.Modal,{title:"",className:"page-pattern-modal",onRequestClose:this.closeModal,aria:{labelledby:`page-pattern-modal__heading-${r}`,describedby:`page-pattern-modal__description-${r}`}},(0,a.createElement)("div",{className:"page-pattern-modal__inner"},(0,a.createElement)("div",{className:"page-pattern-modal__sidebar"},(0,a.createElement)("h1",{id:`page-pattern-modal__heading-${r}`,className:(0,p.A)("page-pattern-modal__heading",{"page-pattern-modal__heading--default":!this.props.title})},this.props.title||__("Add a page","full-site-editing")),(0,a.createElement)("p",{id:`page-pattern-modal__description-${r}`,className:"page-pattern-modal__description"},this.props.description||__("Pick a pre-defined layout or start with a blank page.","full-site-editing")),(0,a.createElement)("div",{className:"page-pattern-modal__button-container"},(0,a.createElement)(o.Button,{variant:"secondary",onClick:()=>this.setPattern("blank"),className:"page-pattern-modal__blank-button"},__("Blank page","full-site-editing")),(0,a.createElement)("select",{className:"page-pattern-modal__mobile-category-dropdown",value:e??void 0,onChange:e=>this.handleCategorySelection(e.currentTarget.value)},this.getPatternCategories()?.map(({slug:e,name:t})=>a.createElement("option",{key:e,value:e},t)))),(0,a.createElement)(o.VisuallyHidden,{as:"h2",id:`page-pattern-modal__list-heading-${r}`},__("Page categories","full-site-editing")),(0,a.createElement)(o.NavigableMenu,{className:"page-pattern-modal__category-list",orientation:"vertical","aria-labelledby":`page-pattern-modal__list-heading-${r}`,onNavigate:(e,t)=>this.handleCategorySelection(t.dataset.slug??null)},this.getPatternCategories()?.map(({slug:t,name:r})=>a.createElement(f,{key:t,variant:"tertiary","aria-selected":t===e,"data-slug":t,onClick:()=>this.handleCategorySelection(t),className:"page-pattern-modal__category-button",tabIndex:t===e?void 0:-1},a.createElement("span",{className:"page-pattern-modal__category-item-selection-wrapper"},r))))),(0,a.createElement)("div",{className:"page-pattern-modal__pattern-list-container"},this.renderPatternGroup()))):null}}let y=(0,l.withInstanceId)(b)},611:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(468),a=r(715),i=r(427),o=r(491);let l=()=>void 0,s=(0,n.memo)((0,o.withInstanceId)(({instanceId:e,label:t,patterns:r=[],onPatternSelect:s=l})=>{let p=(0,o.useAsyncList)(r);return Array.isArray(r)&&r.length?(0,n.createElement)(i.BaseControl,{id:`pattern-selector-control__${e}`,label:t,className:"pattern-selector-control"},(0,n.createElement)(a.__experimentalBlockPatternsList,{blockPatterns:r,shownPatterns:p,onClickPattern:e=>s(e.name)})):null}))},64:(e,t,r)=>{r.d(t,{A:()=>n});let n=function e(t){return!!t.find(t=>"core/missing"===t.name||!!t.innerBlocks&&!!t.innerBlocks.length&&e(t.innerBlocks))}},861:(e,t,r)=>{r.d(t,{W:()=>n});function n(e,t){let r=Object.keys(t),n=e.filter(e=>r.includes(e)),a=r.filter(t=>!e.includes(t)),i=n.concat(a.sort());return i.reduce((e,r)=>(e[r]=t[r],e),{})}},809:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(997);let a=function e(t,r){return t.map(t=>((t=r((0,n.cloneBlock)(t))).innerBlocks&&t.innerBlocks.length&&(t.innerBlocks=e(t.innerBlocks,r)),t))}},341:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(723);let _x=n._x,a={Address:_x("123 Main St","default address","full-site-editing"),Phone:_x("555-555-5555","default phone number","full-site-editing"),CompanyName:_x("Your Company Name","default company name","full-site-editing"),Vertical:_x("Business","default vertical name","full-site-editing")},i={CompanyName:"title",Address:"address",Phone:"phone",Vertical:"vertical"},o=(e,t={})=>e?e.replace(/{{(\w+)}}/g,(e,r)=>{let n=r in a?a[r]:"",o=r in i?i[r]:"";return t[o]||n||r}):""},213:(e,t,r)=>{r.d(t,{$3:()=>i,br:()=>a,m3:()=>l,mk:()=>o}),window._tkq=window._tkq||[];let n=null,a=e=>{n=e,window._tkq.push(["identifyUser",e.userid,e.username])},i=e=>{n&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_view",{blog_id:n.blogid,source:e}])},o=()=>{n&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_dismiss",{blog_id:n.blogid}])},l=e=>{n&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_template_selected",{blog_id:n.blogid,pattern:e}])}},325:e=>{e.exports=window.lodash},715:e=>{e.exports=window.wp.blockEditor},997:e=>{e.exports=window.wp.blocks},427:e=>{e.exports=window.wp.components},491:e=>{e.exports=window.wp.compose},143:e=>{e.exports=window.wp.data},468:e=>{e.exports=window.wp.element},619:e=>{e.exports=window.wp.hooks},723:e=>{e.exports=window.wp.i18n},518:e=>{e.exports=window.wp.nux},279:e=>{e.exports=window.wp.plugins},586:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(205);function a(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},575:(e,t,r)=>{r.d(t,{A:()=>n});function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},824:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(545);function a(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=(0,n.A)(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},205:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(545),a=r(824);function i(e){var t=(0,a.A)(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}},545:(e,t,r)=>{r.d(t,{A:()=>n});function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},357:(e,t,r)=>{r.d(t,{A:()=>n});let n=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n)}return a}(e))&&(n&&(n+=" "),n+=t);return n}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n);var e=r(468),t=r(213),a=r(143),i=r(279),o=r(626),l=r(496);r(499);let{templates:s=[],tracksUserData:p,screenAction:c}=window.starterPageTemplatesConfig??{};p&&(0,t.br)(p),"add"===c&&(0,a.dispatch)(l.L).setOpenState("OPEN_FROM_ADD_PAGE"),(0,i.registerPlugin)("page-patterns",{render:()=>(0,e.createElement)(o.i,{patterns:s}),icon:void 0})})(),window.EditingToolkit=n})();
//# sourceMappingURL=starter-page-templates.min.js.map